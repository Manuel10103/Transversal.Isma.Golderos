<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Carrera del Caballo</title>
    <link rel="stylesheet" href="/css/Dino_Index.css">
    <link rel="icon" type="image/png" href="/imagenes/logo.jpg">
</head>
<body>
    <!-- Oculto: el nombre de usuario real -->
    <input type="hidden" id="username" th:value="${usuario != null ? usuario.nombre : ''}" />

    <div class="game-container">
        <div class="scene">
            <img src="/imagenes/caballo.gif" id="caballo" alt="Caballo corriendo" class="caballo">
        </div>

        <div class="betting-panel">
            <h1>¡Apuesta en la carrera!</h1>
            <p id="saldo" class="saldo">Saldo: $0</p>

            <!-- Modales de depósito y retiro -->
            <div id="deposit-modal" class="modal">
                <div class="modal-content">
                    <span id="close-modal" class="close">&times;</span>
                    <h2>Depositar Dinero</h2>
                    <input type="number" id="deposit-amount" placeholder="Cantidad a depositar" min="1">
                    <button id="deposit-button">Depositar</button>
                </div>
            </div>
            <div id="withdraw-modal" class="modal">
                <div class="modal-content">
                    <span id="withdraw-close" class="close">&times;</span>
                    <h2>Retirar Dinero</h2>
                    <input type="number" id="withdraw-amount" placeholder="Cantidad a retirar" min="1">
                    <button id="withdraw-button">Retirar</button>
                </div>
            </div>

            <!-- Modal de pérdida -->
            <div id="loss-modal" class="modal">
                <div class="modal-content">
                    <span class="close" id="close-loss-modal">&times;</span>
                    <p>¡Te han atrapado! Has perdido tu apuesta.</p>
                </div>
            </div>

            <!-- Input para la apuesta -->
            <label for="bet-amount">Cantidad a apostar:</label>
            <input type="number" id="bet-amount" placeholder="Introduce tu apuesta" min="1">

            <!-- Botones -->
            <div class="button-container">
                <div class="left-buttons">
                    <button id="withdraw-open" class="withdraw-button">Retirar</button>
                    <button id="deposit-open" class="deposit-button">Depositar</button>
                </div>
                <div class="center-buttons">
                    <button id="start-race" class="play-button">Jugar</button>
                    <button id="stop-race" class="stop-button">Parar</button>
                </div>
            </div>

            <!-- Resultados y multiplicador -->
            <p id="result"></p>
            <p id="multiplicador">x1.00</p>

            <!-- Historial -->
            <div id="historial-container">
                <h2>Historial de multiplicadores</h2>
                <div id="historial"></div>
            </div>

            <!-- Modal de error -->
            <div id="error-modal" class="modal">
                <div class="modal-content">
                    <span id="close-error-modal" class="close">&times;</span>
                    <p id="error-text"></p>
                </div>
            </div>

            <button class="btn-volver" onclick="window.history.back();">Volver Atrás</button>
        </div>
    </div>

    <!-- Archivo JS que maneja el saldo real y la lógica de apuestas -->
    <script src="/js/Dino_Index.js"></script>
</body>
</html>
